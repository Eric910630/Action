# 阿里云服务器使用情况查看指南

## 📊 查看服务器使用情况

### 方法1：ECS控制台 - 监控概览（推荐）

1. **登录阿里云控制台**
   - 访问：https://ecs.console.aliyun.com/
   - 使用你的阿里云账号登录

2. **进入ECS实例列表**
   - 在左侧菜单选择"实例与镜像" → "实例"
   - 找到你的服务器实例（IP: 39.102.60.67）

3. **查看监控数据**
   - 点击实例ID或实例名称进入详情页
   - 点击"监控"标签页
   - 可以看到：
     - **CPU使用率**：实时和历史数据
     - **内存使用率**：实时和历史数据
     - **网络流量**：入流量、出流量
     - **磁盘IO**：读写IOPS
     - **磁盘使用率**：各磁盘分区使用情况

### 方法2：云监控控制台（更详细）

1. **访问云监控控制台**
   - 访问：https://cms.console.aliyun.com/
   - 或从ECS控制台点击"云监控"链接

2. **查看ECS监控**
   - 左侧菜单选择"云服务监控" → "ECS"
   - 选择你的实例（i-2zedh71ndzkct4ea2tyn）
   - 可以查看：
     - **实时监控**：当前CPU、内存、网络等
     - **历史数据**：过去1小时、6小时、24小时、7天、30天
     - **告警规则**：设置CPU、内存等告警阈值

### 方法3：在服务器上直接查看（命令行）

```bash
# SSH连接到服务器
ssh root@39.102.60.67

# 查看CPU使用率
top
# 或
htop  # 如果已安装

# 查看内存使用情况
free -h

# 查看磁盘使用情况
df -h

# 查看网络流量（需要安装iftop）
iftop  # 如果已安装

# 查看系统负载
uptime

# 查看进程资源占用
ps aux --sort=-%mem | head -10  # 按内存排序
ps aux --sort=-%cpu | head -10  # 按CPU排序
```

## 📈 关键监控指标

### 1. CPU使用率
- **正常范围**：< 70%
- **告警阈值**：建议设置 > 80% 时告警
- **查看位置**：ECS控制台 → 实例详情 → 监控 → CPU使用率

### 2. 内存使用率
- **当前配置**：4GB内存
- **正常范围**：< 80%
- **告警阈值**：建议设置 > 85% 时告警
- **查看位置**：ECS控制台 → 实例详情 → 监控 → 内存使用率

### 3. 网络流量（带宽）
- **当前配置**：3Mbps
- **查看位置**：ECS控制台 → 实例详情 → 监控 → 网络流量
- **关键指标**：
  - 入流量（下行）
  - 出流量（上行）
  - 带宽使用率

### 4. 磁盘使用率
- **当前配置**：40GB系统盘
- **查看位置**：ECS控制台 → 实例详情 → 监控 → 磁盘使用率
- **告警阈值**：建议设置 > 80% 时告警

## 🔔 设置告警规则（推荐）

### 在云监控控制台设置告警

1. **访问云监控控制台**
   - https://cms.console.aliyun.com/

2. **创建告警规则**
   - 左侧菜单选择"告警服务" → "告警规则"
   - 点击"创建告警规则"
   - 选择资源类型：ECS
   - 选择你的实例

3. **设置告警指标**
   - **CPU使用率**：> 80% 持续5分钟
   - **内存使用率**：> 85% 持续5分钟
   - **磁盘使用率**：> 80% 持续5分钟
   - **公网出流量**：> 2.5Mbps 持续5分钟（接近3Mbps上限）

4. **设置通知方式**
   - 短信通知
   - 邮件通知
   - 钉钉/企业微信（如果配置了）

## 📊 查看应用服务使用情况

### 在服务器上查看服务状态

```bash
# SSH连接到服务器
ssh root@39.102.60.67

# 查看后端服务状态
systemctl status action-backend

# 查看Celery Worker状态
systemctl status action-celery-worker

# 查看服务资源占用
systemctl status action-backend | grep Memory
systemctl status action-celery-worker | grep Memory

# 查看服务日志（最近100行）
journalctl -u action-backend -n 100 --no-pager
journalctl -u action-celery-worker -n 100 --no-pager

# 查看实时日志
journalctl -u action-backend -f
journalctl -u action-celery-worker -f
```

### 查看数据库连接数（PolarDB）

1. **访问PolarDB控制台**
   - https://polardb.console.aliyun.com/
   - 选择你的PolarDB实例

2. **查看监控数据**
   - 点击"监控"标签页
   - 可以查看：
     - **连接数**：当前连接数、最大连接数
     - **QPS**：每秒查询数
     - **TPS**：每秒事务数
     - **CPU使用率**
     - **内存使用率**
     - **存储空间**

### 查看Redis使用情况

```bash
# 在服务器上
redis-cli

# 查看Redis信息
INFO

# 查看内存使用
INFO memory

# 查看连接数
INFO clients

# 查看键数量
DBSIZE

# 退出
exit
```

## 📱 移动端查看（阿里云App）

1. **下载阿里云App**
   - iOS/Android应用商店搜索"阿里云"

2. **登录并查看**
   - 登录你的阿里云账号
   - 进入"云服务器ECS"
   - 选择你的实例
   - 可以查看实时监控数据

## 🎯 推荐监控方案

### 日常监控（每天查看一次）

1. **阿里云控制台** → ECS → 实例详情 → 监控
   - 查看CPU、内存、网络、磁盘使用率
   - 检查是否有异常峰值

2. **云监控控制台** → 告警历史
   - 查看是否有告警触发
   - 检查告警原因和处理情况

### 性能优化时（需要详细数据）

1. **云监控控制台** → 自定义监控
   - 可以创建自定义监控指标
   - 设置更详细的告警规则

2. **在服务器上查看详细日志**
   ```bash
   # 查看系统资源使用历史
   sar -u 1 10  # CPU使用率，每1秒采样，共10次
   sar -r 1 10  # 内存使用率
   sar -n DEV 1 10  # 网络流量
   ```

## ⚠️ 重要提醒

1. **带宽监控**：3Mbps带宽，如果持续接近上限，考虑升级
2. **内存监控**：4GB内存，如果经常 > 80%，考虑升级
3. **磁盘监控**：定期清理日志和临时文件
4. **告警设置**：建议设置关键指标的告警，及时发现问题

## 🔗 快速访问链接

- **ECS控制台**：https://ecs.console.aliyun.com/
- **云监控控制台**：https://cms.console.aliyun.com/
- **PolarDB控制台**：https://polardb.console.aliyun.com/
- **你的服务器实例**：在ECS控制台搜索 `39.102.60.67` 或实例ID `i-2zedh71ndzkct4ea2tyn`

---

**最后更新**：2025-11-17

